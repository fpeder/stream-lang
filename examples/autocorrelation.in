// Autocorrelation

sum( X ) =
  reduce( a, b in X{.} ) a + b;

autocorrelation(X) =
  for each ( k in 1..#X )
  {
    let products = for each ( a in X; b in X[k..] ) a * b;
    sum( products )
  }
